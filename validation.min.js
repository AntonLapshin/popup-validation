!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";var e={required:{message:"Required",method:function(e){if("checkbox"===e.type)return e.checked;if("radio"===e.type){var t=e.name;return e.parentNode.querySelectorAll("input[name="+t+"]:checked").length>0}return""!==e.value}},email:{message:"E-mail is wrong",method:function(e){return""===e.value||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)}}},t=arguments,n={events:["change","paste","blur","keyup"]},i=null,r=function(t){return t.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(n){return!e[n].method(t)}).map(function(t){return e[t].message}).join(", ")},o=function(e){var t=document.createElement("div");t.classList.add("validate-popup");var n=document.createElement("div");return n.appendChild(t.cloneNode(!0)),e.insertAdjacentHTML("beforebegin",n.innerHTML),t=e.previousElementSibling},a=function(e,t){if(0!==e.offsetWidth||0!==e.offsetHeight){e.classList.toggle("validate-error",!0);var n=e.previousElementSibling;n&&n.matches(".validate-popup")||(n=o(e)),n.innerHTML=t,window.setTimeout(function(){var t=e.clientWidth<n.clientWidth?1+~~(e.offsetLeft+e.offsetWidth/2-14):e.offsetLeft+e.clientWidth-n.clientWidth+1,i=e.offsetTop;n.style.left=t+"px",n.style.top=i+"px",n.style.marginTop=-(n.clientHeight+8)+"px",n.classList.toggle("active",!0),n.classList.toggle("short-version",e.clientWidth<n.clientWidth)},0)}},l=function(e){e.classList.toggle("validate-error",!1);var t=e.previousElementSibling;t&&t.matches(".validate-popup")&&t.classList.toggle("active",!1)},c=function(e,t){t?a(e,t):l(e)},u=function(e){var t=e.target;if(t.matches(".validate")){var n=r(t);if("radio"===t.type){var i=t.name,o=document.querySelectorAll('input[name="'+i+'"]');[].forEach.call(o,function(e){return c(e,n)})}else c(t,n)}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return"string"==typeof e?document.querySelector(e):e},f=function(e){return e.querySelectorAll(".validate")},s=function(e){var t=e.target;if(t.matches(".validate-popup")){var n=t.nextElementSibling;n.matches(".validate")&&l(n)}},p=function(e){return!!h.validate(e.target)||(e.preventDefault(),!1)},v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments[2],r=void 0,o=void 0;return function(){var a=+new Date,l=t;r&&a<r+n?(clearTimeout(o),o=setTimeout(function(){r=a,e.apply(i,l)},n)):(r=a,e.apply(i,l))}}(function(){[].forEach.call(document.querySelectorAll(".validate-popup"),function(e){e.classList.toggle("active",!1)})},1e3),m=function(e,t){e=d(e);var i=t?"addEventListener":"removeEventListener",r=f(e);Array.prototype.forEach.call(r,function(e){n.events.forEach(function(t){e[i](t,u)})}),document[i]("click",s),"FORM"===e.nodeName&&e[i]("submit",p),window[i]("resize",v)},h={init:function(e,t){return Object.assign(n,t),m(e,!0),h},rules:e,destroy:function(e){return h.hide(e),m(e,!1),h},hide:function(e){e=d(e);var t=f(e);return Array.prototype.forEach.call(t,function(e){return l(e)}),h},highlight:function(e){e=d(e);var t=f(e);return Array.prototype.forEach.call(t,function(e){return u({target:e})}),h},isValid:function(e){e=d(e);var t=f(e),n=Array.prototype.every.call(t,function(e){return!r(e)});return i&&e.querySelectorAll("."+i).length>0&&(n=!1),n},validate:function(e){return h.highlight(e),h.isValid(e)},addClassValidation:function(e){var t="\n  .{0} {\n    border-color: #D10000 !important;\n  }\n  .{0}:before {\n    opacity: 1;\n  }\n  .{0}:after {\n    opacity: 1;\n  }".replace(/\{0\}/gi,e),n=document.createElement("style");return n.innerHTML=t,document.head.appendChild(n),i=e,h}};return h});
