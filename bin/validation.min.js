!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var e={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},t={required:{message:"Required",method:function(e){if("checkbox"===e.type)return e.checked;if("radio"===e.type){var t=e.name;return e.parentNode.querySelectorAll("input[name="+t+"]:checked").length>0}return""!==e.value}},email:{message:"E-mail is wrong",method:function(t){return""===t.value||e.email.test(t.value.trim())}},emails:{message:"E-mail is wrong",method:function(t){return""===t.value||t.value.split(/;|,/).every(function(t){return e.email.test(t.trim())})}}},n=arguments,r=[],i=window.document,o={events:["change","paste","blur","keyup"]},a=function(e){return e.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(n){return!t[n].method(e)}).map(function(e){return t[e].message}).join(", ")},l=function(e){return e.insertAdjacentHTML("beforebegin",'<div class="validate-popup"/>'),e.previousElementSibling},u=function(e,t){return e.className+=" "+t},c=function(e,t){return e.className=e.className.replace(t,"")},f=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:~e.className.indexOf(t);return n&&!r&&u(e,t)||r&&!n&&c(e,t)},s=function(e,t){if(0!==(e=h(e)).offsetWidth||0!==e.offsetHeight){f(e,"validate-error",!0);var n=e.previousElementSibling;n&&n.matches(".validate-popup")||(n=l(e)),n.innerHTML=t,window.setTimeout(function(){var t=e.clientWidth<n.clientWidth?1+~~(e.offsetLeft+e.offsetWidth/2-14):e.offsetLeft+e.clientWidth-n.clientWidth+1;n.style.left=t+"px",n.style.top=e.offsetTop+"px",n.style.marginTop=-(n.clientHeight+8)+"px",f(n,"active",!0),f(n,"short-version",e.clientWidth<n.clientWidth)},0)}},d=function(e){e=h(e),f(e,"validate-error",!1);var t=e.previousElementSibling;t&&t.matches(".validate-popup")&&f(t,"active",!1)},p=function(e,t){return t?s(e,t):d(e)},v=function(e){var t=e.target;if(t.matches(".validate")){var n=a(t);if("radio"===t.type){var r=t.name,o=i.querySelectorAll('input[name="'+r+'"]');[].forEach.call(o,function(e){return p(e,n)})}else p(t,n)}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return"string"==typeof e?i.querySelector(e)||i.body:e},m=function(e){return e.querySelectorAll(".validate")},g=function(e){return e.target.matches(".validate-popup")&&d(e.target.nextElementSibling)},y=function(e){var t=w.validate(e.target);return!t&&e.preventDefault(),t},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments[2],i=void 0,o=void 0;return function(){var a=+new Date,l=n;i&&a<i+t?(clearTimeout(o),o=setTimeout(function(){i=a,e.apply(r,l)},t)):(i=a,e.apply(r,l))}}(function(){return[].forEach.call(i.querySelectorAll(".validate-popup"),function(e){return f(e,"active",!1)})},1e3),E=function(e,t){e=h(e);var n=t?"addEventListener":"removeEventListener",r=m(e);[].forEach.call(r,function(e){return o.events.forEach(function(t){return e[n](t,v)})}),"FORM"===e.nodeName&&e[n]("submit",y),i[n]("click",g),window[n]("resize",b)},w={init:function(e,t){return Object.assign({},o,t),E(e,!0),w},rules:t,show:function(e,t){return s(e,t),w},hide:function(e){return d(e),w},destroy:function(e){return w.hideAll(e),E(e,!1),w},hideAll:function(e){return[].forEach.call(m(h(e)),function(e){return d(e)}),w},highlight:function(e){return[].forEach.call(m(h(e)),function(e){return v({target:e})}),w},isValid:function(e){return(0===r.length||0===h(e).querySelectorAll(r.join(",")).length)&&[].every.call(m(h(e)),function(e){return!a(e)})},validate:function(e){return w.highlight(e),w.isValid(e)},addClassValidation:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Invalid",o=i.createElement("style");return o.innerHTML=t.split(",").map(function(e){return"\n    {0}:before, {0}:after{\n      opacity: 1;\n    } \n    {0} {\n      border-color: #D10000 !important;\n    }\n    {0}-ready:before {\n      content: '{1}';\n    }".replace(/\{0\}/gi,e).replace(/\{1\}/gi,n)}).join(""),i.head.appendChild(o),r.push(t),[].forEach.call(i.querySelectorAll(e),function(e){return e.className+=" validate-class "+t.substring(1)+"-ready"}),w}};return w});
