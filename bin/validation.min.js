!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";var e={required:{message:"Required",method:function(e){if("checkbox"===e.type)return e.checked;if("radio"===e.type){var t=e.name;return e.parentNode.querySelectorAll("input[name="+t+"]:checked").length>0}return""!==e.value}},email:{message:"E-mail is wrong",method:function(e){return""===e.value||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)}}},t=["change","paste","blur","keyup"],n=null,i=function(t){return t.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(n){return!e[n].method(t)}).map(function(t){return e[t].message}).join(", ")},r=function(e){var t=e.target;if(t.matches(".validate")){var n=i(t);t.classList.toggle("validate-error",!!n);var r=t.previousElementSibling;if(n){if(!r||!r.matches(".validate-popup")){(r=document.createElement("div")).classList.add("validate-popup");var a=document.createElement("div");a.appendChild(r.cloneNode(!0)),t.insertAdjacentHTML("beforebegin",a.innerHTML),r=t.previousElementSibling}r.innerHTML=n,window.setTimeout(function(){var e=t.clientWidth<r.clientWidth?t.offsetLeft+t.offsetWidth/2-14:t.offsetLeft+t.clientWidth-r.clientWidth+1,n=t.offsetTop;r.style.left=e+"px",r.style.top=n+"px",r.style.marginTop=-(r.clientHeight+8)+"px",r.classList.toggle("active",!0),r.classList.toggle("short-version",t.clientWidth<r.clientWidth)},0)}else if("radio"===t.type){var l=t.name,o=document.querySelectorAll('input[name="'+l+'"]');Array.prototype.forEach.call(o,function(e){var t=e.previousElementSibling;t&&t.matches(".validate-popup")&&t.classList.toggle("active",!1)})}else r&&r.matches(".validate-popup")&&r.classList.toggle("active",!1)}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return"string"==typeof e?document.querySelector(e):e},l=function(e){var t=e.target;if(t.matches(".validate-popup")){var n=t.nextElementSibling;n.matches(".validate")&&n.classList.toggle("validate-error",!1),t.classList.toggle("active",!1)}},o=function(e){return!!u.validate(e.target)||(e.preventDefault(),!1)},c=function(e,n){e=a(e);var i=n?"addEventListener":"removeEventListener",c=e.querySelectorAll(".validate");Array.prototype.forEach.call(c,function(e){t.forEach(function(t){e[i](t,r)})}),document[i]("click",l),"FORM"===e.nodeName&&e[i]("submit",o)},u={init:function(e){return c(e,!0),u},destroy:function(e){return u.hide(e),c(e,!1),u},hide:function(e){var t=(e=a(e)).querySelectorAll(".validate-popup");return Array.prototype.forEach.call(t,function(e){e.classList.toggle("active",!1);var t=e.nextElementSibling;t.matches(".validate")&&t.classList.toggle("validate-error",!1)}),u},highlight:function(e){var t=(e=a(e)).querySelectorAll(".validate");return Array.prototype.forEach.call(t,function(e){var t=document.createEvent("HTMLEvents");t.initEvent("blur",!0,!1),e.dispatchEvent(t)}),u},isValid:function(e){var t=(e=a(e)).querySelectorAll(".validate"),r=Array.prototype.every.call(t,function(e){return!i(e)});return n&&e.querySelectorAll("."+n).length>0&&(r=!1),r},validate:function(e){return u.highlight(e),u.isValid(e)},getRules:function(){return e},addClassValidation:function(e){var t="\n.{0} {\n  border-color: #D10000 !important;\n}\n.{0}:before {\n  opacity: 1;\n}\n.{0}:after {\n  opacity: 1;\n}".replace(/\{0\}/gi,e),i=document.createElement("style");return i.innerHTML=t,document.head.appendChild(i),n=e,u}};return u});
