!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";var e={required:{message:"Required",method:function(e){if("checkbox"===e.type)return e.checked;if("radio"===e.type){var t=e.name;return e.parentNode.querySelectorAll("input[name="+t+"]:checked").length>0}return""!==e.value}},email:{message:"E-mail is wrong",method:function(e){return""===e.value||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)}}},t=["change","paste","blur","keyup"],i=function(t){return t.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(i){return!e[i].method(t)}).map(function(t){return e[t].message}).join(", ")},n=function(e){var t=e.target;if(t.matches(".validate")){var n=i(t);t.classList.toggle("validate-error",!!n);var a=t.previousElementSibling;if(n){if(!a||!a.matches(".validate-popup")){(a=document.createElement("div")).classList.add("validate-popup");var r=document.createElement("div");r.appendChild(a.cloneNode(!0)),t.insertAdjacentHTML("beforebegin",r.innerHTML),a=t.previousElementSibling}a.innerHTML=n,window.setTimeout(function(){var e=t.clientWidth<a.clientWidth?t.offsetLeft+t.offsetWidth/2-14:t.offsetLeft+t.clientWidth-a.clientWidth+1,i=t.offsetTop;a.style.left=e+"px",a.style.top=i+"px",a.style.marginTop=-(a.clientHeight+8)+"px",a.classList.toggle("active",!0)},0)}else if(a&&a.matches(".validate-popup"))if("radio"===t.type){var o=t.name,l=document.querySelectorAll('input[name="'+o+'"]');Array.prototype.forEach.call(l,function(e){var t=e.previousElementSibling;t&&t.matches(".validate-popup")&&t.classList.toggle("active",!1)})}else a.classList.toggle("active",!1)}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return"string"==typeof e?document.querySelector(e):e},r=function(e){var t=e.target;if(t.matches(".validate-popup")){var i=t.nextElementSibling;i.matches(".validate")&&i.classList.toggle("validate-error",!1),t.classList.toggle("active",!1)}},o=function(e){return!!c.validate(e.target)||(e.preventDefault(),!1)},l=function(e,i){e=a(e);var l=i?"addEventListener":"removeEventListener",c=e.querySelectorAll(".validate");Array.prototype.forEach.call(c,function(e){t.forEach(function(t){e[l](t,n)})}),document[l]("click",r),"FORM"===e.nodeName&&e[l]("submit",o)},c={init:function(e){l(e,!0)},destroy:function(e){c.hide(e),l(e,!1)},hide:function(e){var t=(e=a(e)).querySelectorAll(".validate-popup");Array.prototype.forEach.call(t,function(e){e.classList.toggle("active",!1);var t=e.nextElementSibling;t.matches(".validate")&&t.classList.toggle("validate-error",!1)})},highlight:function(e){var t=(e=a(e)).querySelectorAll(".validate");Array.prototype.forEach.call(t,function(e){var t=document.createEvent("HTMLEvents");t.initEvent("blur",!0,!1),e.dispatchEvent(t)})},isValid:function(e){var t=(e=a(e)).querySelectorAll(".validate"),n=Array.prototype.every.call(t,function(e){return!i(e)});return n},validate:function(e){return c.highlight(e),c.isValid(e)},getRules:function(){return e}};return c});
