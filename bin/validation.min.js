!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";var e=arguments,t=window.document,n=[],i={events:["change","paste","blur","keyup"]},r=function(e){return e.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(t){return!rules[t].method(e)}).map(function(e){return rules[e].message}).join(", ")},o=function(e){var n=t.createElement("div");n.classList.add("validate-popup");var i=t.createElement("div");return i.appendChild(n.cloneNode(!0)),e.insertAdjacentHTML("beforebegin",i.innerHTML),n=e.previousElementSibling},a=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.classList.contains(t);return(n&&!i||!n&&i)&&e.classList[n&&!i?"add":"remove"](t)},l=function(e,t){if(0!==e.offsetWidth||0!==e.offsetHeight){a(e,"validate-error",!0);var n=e.previousElementSibling;n&&n.matches(".validate-popup")||(n=o(e)),n.innerHTML=t,window.setTimeout(function(){var t=e.clientWidth<n.clientWidth?1+~~(e.offsetLeft+e.offsetWidth/2-14):e.offsetLeft+e.clientWidth-n.clientWidth+1;n.style.left=t+"px",n.style.top=e.offsetTop+"px",n.style.marginTop=-(n.clientHeight+8)+"px",a(n,"active",!0),a(n,"short-version",e.clientWidth<n.clientWidth)},0)}},u=function(e){a(e,"validate-error",!1);var t=e.previousElementSibling;t&&t.matches(".validate-popup")&&a(t,"active",!1)},c=function(e,t){return t?l(e,t):u(e)},f=function(e){var n=e.target;if(n.matches(".validate")){var i=r(n);if("radio"===n.type){var o=n.name,a=t.querySelectorAll('input[name="'+o+'"]');[].forEach.call(a,function(e){return c(e,i)})}else c(n,i)}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";return"string"==typeof e?t.querySelector(e)||t.body:e},s=function(e){return e.querySelectorAll(".validate")},p=function(e){return e.target.matches(".validate-popup")&&e.target.nextElementSibling.matches(".validate")&&u(e.target.nextElementSibling)},v=function(e){var t=g.validate(e.target);return!t&&e.preventDefault(),t},h=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments[2],r=void 0,o=void 0;return function(){var a=+new Date,l=e;r&&a<r+n?(clearTimeout(o),o=setTimeout(function(){r=a,t.apply(i,l)},n)):(r=a,t.apply(i,l))}}(function(){return[].forEach.call(t.querySelectorAll(".validate-popup"),function(e){return a(e,"active",!1)})},1e3),m=function(e,n){e=d(e);var r=n?"addEventListener":"removeEventListener",o=s(e);[].forEach.call(o,function(e){return i.events.forEach(function(t){return e[r](t,f)})}),"FORM"===e.nodeName&&e[r]("submit",v),t[r]("click",p),window[r]("resize",h)},g={init:function(e,t){return Object.assign(i,t),m(e,!0),g},rules:rules,destroy:function(e){return g.hideAll(e),m(e,!1),g},hideAll:function(e){return[].forEach.call(s(d(e)),function(e){return u(e)}),g},highlight:function(e){return[].forEach.call(s(d(e)),function(e){return f({target:e})}),g},isValid:function(e){return 0===e.querySelectorAll(n.join(",")).length&&[].every.call(s(d(e)),function(e){return!r(e)})},validate:function(e){return g.highlight(e),g.isValid(e)},addClassValidation:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Invalid",r=t.createElement("style");return r.innerHTML=e.split(",").map(function(e){return"\n  {0} {\n    border-color: #D10000 !important;\n  }\n  {0}:before {\n    opacity: 1 !important;\n    {1}\n  }\n  {0}:after {\n    opacity: 1 !important;\n  }".replace(/\{0\}/gi,e).replace(/\{1\}/gi,i?"content: '"+i+"' !important;":"")}).join(""),t.head.appendChild(r),n.push(e),g},show:function(e,t){return l(e,t),g},hide:function(e){return u(e),g}};return g});
