!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validation=t()}(this,function(){"use strict";var e={required:{message:"Required",method:function(e){if("checkbox"===e.type)return e.checked;if("radio"===e.type){var t=e.name;return e.parentNode.querySelectorAll("input[name="+t+"]:checked").length>0}return""!==e.value}},email:{message:"E-mail is wrong",method:function(e){return""===e.value||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)}}},t=["change","paste","blur","keyup"],i=function(t){var i=t.target;if(i.matches(".validate")){var n=i.getAttribute("data-validate").split(",").map(function(e){return e.trim()}).filter(function(t){return!e[t].method(i)}).map(function(t){return e[t].message}).join(", ");i.classList.toggle("validate-error",!!n);var a=i.previousElementSibling;if(n){if(!a||!a.matches(".validate-popup")){(a=document.createElement("div")).classList.add("validate-popup");var r=document.createElement("div");r.appendChild(a.cloneNode(!0)),i.insertAdjacentHTML("beforebegin",r.innerHTML),a=i.previousElementSibling}a.innerHTML=n,window.setTimeout(function(){var e=i.clientWidth<a.clientWidth?i.offsetLeft+i.offsetWidth/2-14:i.offsetLeft+i.clientWidth-a.clientWidth+1,t=i.offsetTop;a.style.left=e+"px",a.style.top=t+"px",a.style.marginTop=-(a.clientHeight+8)+"px",a.classList.toggle("active",!0)},0)}else a&&a.classList.toggle("active",!1)}},n=function(e){var t=e.target;if(t.matches(".validate-popup")){var i=t.nextElementSibling;i.matches(".validate")&&i.classList.toggle("validate-error",!1),t.classList.toggle("active",!1)}},a=function(e){var a=e?"addEventListener":"removeEventListener",r=document.querySelectorAll(".validate");Array.prototype.forEach.call(r,function(e){t.forEach(function(t){e[a](t,i)})}),document[a]("click",n)};return{init:function(){a(!0)},destroy:function(){a(!1)},getRules:function(){return e}}});
